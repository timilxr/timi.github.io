<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Forms</title>
	<style>
	form{
		background-color: white;
		color: black;
		border-radius: 20px;
		width: 30%;
		margin-left: auto;
		margin-right: auto;
		margin-top: 50px;
		padding: 2%;
		/*text-align: center;*/

	}
	p,label{
		font-weight: bolder;
		font-family: helvetica, sans-serif;
		margin-bottom: 5px;
	}
	div{
		margin-left: auto;
		margin-right: auto;
		/*background-color: yellow;*/
		width: 80%;
	}
	input,textarea,option,select{
		border: 1.2px solid silver;
		padding: 8px;
		border-radius: 5px;
		width: 100%;
	}
	#b{
		background-color: #1f1fff;
		font-size: 15px;
		font-weight: bolder;
		color: white;
		margin-right: 15%;
		text-align: center;
		margin-left: 10px;
	}
	body{
		background-color: #2121f9;
	}
	</style>
</head>
<body>
	<!-- <p id="show"></p> -->
	<form action="" method="">
		<div>
			<h2>Region</h2>
			<label for="1">Fullname:</label>
			<input type="text" placeholder="name" name="name" id="1" value="" required>
			<label for="2">average age:</label>
			<input type="number" placeholder="enter average age" name="avgAge" id="2" value="" required>
			<label for="3">average daily income in USD:</label>
			<input type="number" placeholder="enter average daily income in USD" name="avgDailyIncomeInUSD" id="3" value="" required>
			<label for="4">average daily income in population:</label>
			<input type="number" placeholder="enter average daily income in population" name="avgDailyIncomePopulation" id="4" value="" required>
			<label for="5">Period:</label>
			<select name="data-period-type" id="5" required>
				<option value="days">days</option>
				<option value="weeks">weeks</option>
				<option value="months">months</option>
			</select>
			<label for="6">Time to elapse:</label>
			<input type="number" placeholder="enter time" name="data-time-to-elapse" id="6" value="" required>
			<label for="7">Reported cases:</label>
			<input type="number" placeholder="enter value of reported cases" name="data-reported-cases" id="7" value="" required>
			<label for="8">population:</label>
			<input type="number" placeholder="enter population" name="data-population" id="8" value="" required>
			<label for="9">Total hospital beds:</label>
			<input type="number" placeholder="enter total hospital beds" name="data-total-hospital-beds" id="9" value="" required>
			<p><input id="b" type="Submit" value="data go estimate" onclick="go()" name="data-go-estimate"></p>
		</div>
	</form>
</body>
</html>
<script>
	function go(){
		const data = {
			region: {
				name: '',
				avgAge: 0,
				avgDailyIncomeInUSD: 0,
				avgDailyIncomePopulation: 0
			},
			periodType: '',
			timeToElapse: 0,
			reportedCases: 0,
			population: 0,
			totalHospitalBeds: 0
		};
		data.region.name = document.getElementById('1').value;
		data.region.avgAge = Number(document.getElementById('2').value);
		data.region.avgDailyIncomeInUSD = Number(document.getElementById('3').value);
		data.region.avgDailyIncomePopulation = Number(document.getElementById('4').value);
		data.periodType = document.getElementById('5').value;
		data.timeToElapse = Number(document.getElementById('6').value);
		data.reportedCases = Number(document.getElementById('7').value);
		data.population = Number(document.getElementById('8').value);
		data.totalHospitalBeds = Number(document.getElementById('9').value);
		console.log(data);
		// document.getElementById('show').innerHTML = name;
		const answer = covid19ImpactEstimator(data);
		console.log(answer);
	}

	const covid19ImpactEstimator = (data) => {
  const impact = {};
  const severeImpact = {};
  const beds = 0.35 * data.totalHospitalBeds;
  const income = data.region.avgDailyIncomeInUSD;
  const population = data.region.avgDailyIncomePopulation;
  if (data.periodType === 'weeks') {
    data.timeToElapse *= 7;
  } else if (data.periodType === 'months') {
    data.timeToElapse *= 30;
  }
  const days = data.timeToElapse;
  const factor = Math.trunc(days / 3);
  impact.currentlyInfected = data.reportedCases * 10;
  severeImpact.currentlyInfected = data.reportedCases * 50;
  impact.infectionsByRequestedTime = impact.currentlyInfected * (2 ** factor);
  severeImpact.infectionsByRequestedTime = severeImpact.currentlyInfected * (2 ** factor);
  impact.severeCasesByRequestedTime = 0.15 * impact.infectionsByRequestedTime;
  severeImpact.severeCasesByRequestedTime = 0.15 * severeImpact.infectionsByRequestedTime;

  const impactCases = impact.severeCasesByRequestedTime;
  const severeCases = severeImpact.severeCasesByRequestedTime;
  impact.hospitalBedsByRequestedTime = Math.ceil(beds - impactCases);
  severeImpact.hospitalBedsByRequestedTime = Math.ceil(beds - severeCases);

  const severeImpactInfections = severeImpact.infectionsByRequestedTime;
  impact.casesForICUByRequestedTime = Math.floor(0.05 * impact.infectionsByRequestedTime);
  severeImpact.casesForICUByRequestedTime = Math.floor(0.05 * severeImpactInfections);

  impact.casesForVentilatorsByRequestedTime = Math.floor(0.02 * impact.infectionsByRequestedTime);
  severeImpact.casesForVentilatorsByRequestedTime = Math.floor(0.02 * severeImpactInfections);

  const severeInfectionsByRequestedTime = severeImpact.infectionsByRequestedTime;
  // eslint-disable-next-line max-len
  impact.dollarsInFlight = Math.floor((impact.infectionsByRequestedTime * income * population) / days);
  const sol = Math.floor((severeInfectionsByRequestedTime * income * population) / days);
  severeImpact.dollarsInFlight = sol;
  return {
    data,
    impact,
    severeImpact
  };
};

</script>
